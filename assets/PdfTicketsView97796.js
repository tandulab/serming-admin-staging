import{o as y,a as S,l as d,c as k,_ as x,r as u,q as L,b as v,m as T,w as g,h as D,f as _,t as B,g as f,s as U,u as z,p as b,e as w}from"../index97796.js";import{e as P,u as E,s as M}from"./helpers97796.js";import{u as V,a as N}from"./upload97796.js";import{F as O}from"./vee-validate.esm97796.js";const j={setup(){y(()=>{l.value=!0,i.value={first:0,rows:e.value.rows,sortField:null,sortOrder:null},i.value.page=0,a()});const s=S(),e=d(),n=d(),t=d(),l=d(!0),i=d(),r=d(0),m=V(),p=k(()=>m.responseBanners);function a(){l.value=!0,setTimeout(()=>{c()},Math.random()*1e3+250)}const c=async function(){await m.fetchAll().then(()=>{l.value=!1}).catch(o=>{l.value=!1,P(s,o)})};return{dt:e,responseBanners:p,loading:l,totalRecords:r,lazyParams:i,currentOrder:n,op:t,loadLazyData:a}}};const A=["innerHTML"],I={class:"flex justify-content-center"};function H(s,e,n,t,l,i){const r=u("Column"),m=u("Button"),p=u("DataTable"),a=L("tooltip");return v(),T(p,{value:t.responseBanners.banners,lazy:!0,paginator:!1,ref:"dt",loading:t.loading,stripedRows:"",class:"banner"},{empty:g(()=>[D(" Nessuna configurazione trovata. ")]),default:g(()=>[_(r,{header:"Location",field:"location",style:{"min-width":"200px"}},{body:g(({data:c})=>{var o;return[D(B(((o=c.location)==null?void 0:o.name)||"Tutte le location"),1)]}),_:1}),_(r,{header:"Testo PDF biglietto standard",style:{"vertical-align":"top"}},{body:g(({data:c})=>{var o;return[f("div",{innerHTML:(o=c.translations.it.standard_ticket_pdf)==null?void 0:o.text},null,8,A)]}),_:1}),_(r,{header:""},{body:g(({data:c})=>[f("div",I,[U(_(m,{link:"",icon:"pi pi-pencil",text:"",rounded:"",style:{color:"var(--surface-400)"},onClick:o=>s.$emit("onEditBanner",c)},null,8,["onClick"]),[[a,"Modifica",void 0,{top:!0}]])])]),_:1})]),_:1},8,["value","loading"])}const R=x(j,[["render",H]]),q={props:["banner"],setup(s,e){y(()=>{s.banner&&(n.value=Object.assign({},s.banner))});const n=d({}),{showLoader:t,hideLoader:l}=E(),i=S(),r=d("it"),m=V(),p=N(),a=z(),c=k(()=>a.languages),o=k(()=>p.responseUploads);return{form:n,lang_selected:r,uploadedImage:o,languages:c,onSubmit:function(){t();let C={it:{standard_ticket_pdf:n.value.translations.it.standard_ticket_pdf.text,open_ticket_pdf:n.value.translations.it.open_ticket_pdf.text},en:{standard_ticket_pdf:n.value.translations.en.standard_ticket_pdf.text,open_ticket_pdf:n.value.translations.en.open_ticket_pdf.text}};const h={banner:n.value};h.banner.translations=C,m.updateCopyPDF(h).then(()=>{l(),M(i,{message:"Testo Pdf aggiornato correttamente",error:!1}),e.emit("onSubmit")}).catch(F=>{P(i,F)})},resetForm:function(){e.emit("onSubmit",n.value)}}},components:{Form:O}};const $={class:"formgrid grid flex-column mt-3"},G={class:"field col-12 flex flex-column"},J=f("label",{for:"location"},"Location",-1),K={class:"col-12 flex justify-content-end m-0 p-0 align-items-center mt-4"},Q={key:0,class:"formgrid grid card mt-3"},W={class:"col-12 mt-0 p-0"},X={class:"field"},Y={class:"flex align-items-center justify-content-end mt-6"};function Z(s,e,n,t,l,i){const r=u("InputText"),m=u("Dropdown"),p=u("Editor"),a=u("Button"),c=u("Form");return t.form?(v(),T(c,{key:0,onSubmit:t.onSubmit,class:"banner"},{default:g(()=>[f("div",$,[f("div",G,[J,t.form.location?(v(),T(r,{key:0,modelValue:t.form.location.name,"onUpdate:modelValue":e[0]||(e[0]=o=>t.form.location.name=o),disabled:""},null,8,["modelValue"])):b("",!0)])]),f("div",K,[_(m,{options:t.languages,optionLabel:"name",optionValue:"value",class:"m-2 capitalize dropdown-lng",modelValue:t.lang_selected,"onUpdate:modelValue":e[1]||(e[1]=o=>t.lang_selected=o)},null,8,["options","modelValue"])]),t.form.translations?(v(),w("div",Q,[f("h3",W,"Testo pdf ("+B(t.lang_selected.toUpperCase())+")",1),f("div",X,[_(p,{modelValue:t.form.translations[t.lang_selected].standard_ticket_pdf.text,"onUpdate:modelValue":e[2]||(e[2]=o=>t.form.translations[t.lang_selected].standard_ticket_pdf.text=o),editorStyle:"height: 320px"},null,8,["modelValue"])])])):b("",!0),f("div",Y,[_(a,{label:"Annulla",text:"",onClick:e[3]||(e[3]=o=>t.resetForm())}),_(a,{label:"Conferma",type:"submit"})])]),_:1},8,["onSubmit"])):b("",!0)}const tt=x(q,[["render",Z]]),et={setup(){y(()=>{});const s=d(!1),e=d(),n=d({});return{visibleDialog:s,pdfTicketsTable:e,currentBanner:n,onSubmit:function(){s.value=!1,e.value.loadLazyData()},openEditDialog:function(i){s.value=!0,n.value=i}}},components:{PdfTicketsTable:R,PdfTicketsDialog:tt}},ot=f("h1",null,"Configurazioni PDF",-1);function nt(s,e,n,t,l,i){const r=u("PdfTicketsTable"),m=u("PdfTicketsDialog"),p=u("Dialog");return v(),w("div",null,[ot,_(r,{ref:"pdfTicketsTable",onOnEditBanner:e[0]||(e[0]=a=>t.openEditDialog(a))},null,512),_(p,{visible:t.visibleDialog,"onUpdate:visible":e[2]||(e[2]=a=>t.visibleDialog=a),modal:"",header:"Configurazione PDF",style:{width:"50rem"}},{default:g(()=>[_(m,{onOnSubmit:e[1]||(e[1]=a=>t.onSubmit()),banner:t.currentBanner},null,8,["banner"])]),_:1},8,["visible"])])}const dt=x(et,[["render",nt]]);export{dt as default};
