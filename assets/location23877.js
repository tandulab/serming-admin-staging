import{x as s,G as l,B as r,A as d}from"../index23877.js";class e{static async fetchAll(){return(await s("/admin/locations")).data}static async downloadReport(t){return await l(`/admin/locations/${t.location_id}/orders/report`,t)}static async getCourses(t){return await s(`/admin/locations/${t}/courses`)}static async updateLocation(t){return(await r(`/admin/locations/${t.location_id}`,t)).data}}const c=localStorage.getItem("location"),i=localStorage.getItem("locations"),p=c?JSON.parse(c):null,u=i?JSON.parse(i):null,g=d({id:"location",state:()=>({location:p,locations:u,response_locations:{}}),getters:{allLocations:o=>o.locations,responseLocations:o=>o.response_locations,getTotalLocations:o=>o.response_locations?o.response_locations.total:0,getCurrentLocation:o=>o.location},actions:{async fetchAllLocations(){await e.fetchAll().then(o=>{this.response_locations=o,this.locations=o.banners,localStorage.setItem("locations",JSON.stringify(o.banners)),localStorage.setItem("location",JSON.stringify(o.banners[0]))})},updateCurrenLocation(o){this.location=o,localStorage.setItem("location",JSON.stringify(o))},async downloadReport(o){await e.downloadReport(o).then(t=>{const a=new Blob([t.data],{type:t.headers["content-type"]}),n=document.createElement("a");n.href=window.URL.createObjectURL(a),n.download="Report-"+o.location_permalink+".xlsx",n.click()})},async updateLocation(o){await e.updateLocation(o).then(t=>{this.updateCurrenLocation(t==null?void 0:t.location)})}}});export{g as u};
