import{d as b,u as g,a as v,c as C,_ as L,r as n,b as y,e as P,f as a,w as _,g as p}from"../index97796.js";import{L as x}from"./Logo97796.js";import{F as V}from"./vee-validate.esm97796.js";/* empty css                                                                            */import{P as $}from"./PasswordWithValidation97796.js";import{c as S,a as u,b as B}from"./index.esm97796.js";import{u as F,s as k,e as f}from"./helpers97796.js";import"./_commonjsHelpers97796.js";const U=b({name:"ChangePwdView",setup(){const o=g(),r=v(),{showLoader:l,hideLoader:e}=F(),w=S({password:u().required("La password è obbligatoria").min(8,"La password deve essere di almeno 8 caratteri"),password_confirmation:u().oneOf([B("password")],"Le password devono corrispondere").required("La conferma password è obbligatoria")}),t=C(()=>o.user),m=async function(s,i){l();const d={id:t.value.id,user:{password_confirmation:s.password_confirmation,password:s.password}};await o.changePassword(d).then(async()=>{k(r,{message:"Password aggiornata correttamente",error:!1}),e(),c()}).catch(h=>{e(),f(r,h)})};async function c(){const s={email:t.value.email,password:t.value.password};await o.login(s).then(async()=>{e()}).catch(i=>{e(),f(r,i)})}return{schema:w,currentUser:t,onSubmit:m}},components:{Logo:x,PasswordWithValidation:$,Form:V}});const W={class:"flex justify-content-center align-items-center mt-4 sm:h-screen sm:mt-0 login"},q={class:"m-2 text-center"},N=p("h1",{class:"mb-3 mt-0 text-center"},"Cambia la password",-1),T=p("p",{class:"font-normal mb-4"},"Inserisci una nuova password di minimo 8 caratteri",-1);function j(o,r,l,e,w,t){const m=n("Logo"),c=n("PasswordWithValidation"),s=n("Button"),i=n("Form"),d=n("Card");return y(),P("div",W,[a(d,{class:"py-4 px-3"},{content:_(()=>[p("div",q,[a(m)]),N,T,a(i,{"validation-schema":o.schema,onSubmit:o.onSubmit,class:"flex flex-column"},{default:_(()=>[a(c,{name:"password",label:"Password*",type:"password"}),a(c,{name:"password_confirmation",label:"Conferma password*",type:"password"}),a(s,{label:"Conferma password",type:"submit",class:"mt-5 mb-3"})]),_:1},8,["validation-schema","onSubmit"])]),_:1})])}const J=L(U,[["render",j]]);export{J as default};
