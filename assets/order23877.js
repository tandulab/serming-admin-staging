import{x as d,y as l,D as n,A as c}from"../index23877.js";import{D as i}from"./formatData23877.js";class r{static async fetchAll(a){const t=a.get("location_id");return a.delete("location_id"),(await d(`/admin/locations/${t}/orders`,a)).data}static async fetchAllReveliaOrders(a){return(await d("/admin/orders",a)).data}static async deleteOrder(a){return await l(`/admin/orders/${a.order_id}/events/${a.event_id}/cancel`)}static async downloadOrderPDF(a){return await n(`/admin/orders/${a.order_id}/events/${a.event_id}/download`)}static async downloadOrderCsv(a){const t=a.get("location_id");return await n(`/admin/locations/${t}/orders`,a)}static async downloadReveliaOrderCsv(a){return await n("/admin/orders",a)}}const w=c({id:"order",state:()=>({order:{},orders:[],response_orders:{},total_orders:Number,calendar:{},discount:{},response:{}}),getters:{allOrders:e=>e.response_orders.orders,responseOrders:e=>e.response_orders,getTotalOrders:e=>e.response_orders?e.response_orders.total:0,getCurrentOrder:e=>e.order,status:()=>[{name:"Attivo",value:"true"},{name:"Disattivo",value:"false"}],getCalendar:e=>e.calendar,getDiscount:e=>e.discount,paymentStatus:()=>[{id:"to_pay",name:"Da pagare"},{id:"payed",name:"Pagato"},{id:"free",name:"Gratuito"}],paymentStatusRevelia:()=>[{id:"pending_payment",name:"In attesa di pagamento"},{id:"paid",name:"Pagato"},{id:"not_paid",name:"Non pagato"},{id:"canceled",name:"Cancellato"}],paymentModeList:()=>[{label:"POS",id:"pos"},{label:"Satispay (online)",id:"satispay"},{label:"Satispay",id:"satispay_office"},{label:"Ecommerce",id:"ecommerce"},{label:"Contanti",id:"cash"},{label:"Bonifico",id:"credit_transfer"},{label:"Biglietto a data aperta (voucher)",id:"voucher"},{label:"Acconto / Saldo",id:"deposit_balance"},{label:"Mastercard/Visa (online)",id:"credit_card"}],getDeleteResponse:e=>e.response},actions:{async fetchAllOrders(e){await r.fetchAll(e).then(a=>this.response_orders=a)},async fetchAllReveliaOrders(e){await r.fetchAllReveliaOrders(e).then(a=>this.response_orders=a)},async deleteOrder(e){await r.deleteOrder(e)},async downloadOrderPDF(e){await r.downloadOrderPDF(e).then(a=>{const t=new Blob([a.data],{type:"application/pdf"}),o=URL.createObjectURL(t);window.open(o,"_blank")})},async downloadOrderCsv(e){await r.downloadOrderCsv(e).then(a=>{const t=new Blob([a.data],{type:"text/csv;charset=utf-8"}),o=document.createElement("a");o.href=window.URL.createObjectURL(t);const s=i.local().toFormat("dd_MM_yyyy");o.download="Prenotazioni_"+s+".csv",o.click()})},async downloadReveliaOrderCsv(e){await r.downloadReveliaOrderCsv(e).then(a=>{const t=new Blob([a.data],{type:"text/csv;charset=utf-8"}),o=document.createElement("a");o.href=window.URL.createObjectURL(t);const s=i.local().toFormat("dd_MM_yyyy");o.download="Prenotazioni_"+s+".csv",o.click()})}}});export{w as u};
